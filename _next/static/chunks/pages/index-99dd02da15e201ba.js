(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4184:function(t,r){var e; /*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/ !function(){"use strict";var n={}.hasOwnProperty;function a(){for(var t=[],r=0;r<arguments.length;r++){var e=arguments[r];if(e){var i=typeof e;if("string"===i||"number"===i)t.push(e);else if(Array.isArray(e)){if(e.length){var u=a.apply(null,e);u&&t.push(u)}}else if("object"===i){if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]")){t.push(e.toString());continue}for(var o in e)n.call(e,o)&&e[o]&&t.push(o)}}}return t.join(" ")}t.exports?(a.default=a,t.exports=a):void 0!==(e=(function(){return a}).apply(r,[]))&&(t.exports=e)}()},8312:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(400)}])},400:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return O}});var n=e(6042);function a(t,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e.push.apply(e,n)}return e})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}var i=e(5893),u=e(7294),o=e(5656),l=function(){var t=(0,u.useContext)(o.Global),r=t.gameState,e=t.setGameState,l=(0,u.useRef)(null);return(0,u.useEffect)(function(){r.start?(e(a((0,n.Z)({},r),{time:0})),l.current=setInterval(function(){e(function(t){return a((0,n.Z)({},t),{time:t.time+1})})},1e3)):clearInterval(l.current)},[r.start]),(0,i.jsxs)("div",{className:"timer",children:[(0,i.jsx)("span",{className:"digit digit-".concat(r.time>999?9:Math.floor(r.time/100))}),(0,i.jsx)("span",{className:"digit digit-".concat(r.time>999?9:Math.floor(r.time%100/10))}),(0,i.jsx)("span",{className:"digit digit-".concat(r.time>999?9:r.time%10)})]})},s=function(){var t=(0,u.useContext)(o.Global),r=t.gameState;t.setGameState;var e=(0,u.useState)(r.mine-r.flag),n=e[0],a=e[1];return(0,u.useEffect)(function(){a(r.mine-r.flag)},[r.flag,r.mine]),(0,i.jsxs)("div",{className:"flagCount",children:[(0,i.jsx)("span",{className:"digit digit-".concat(Math.floor(n/100))}),(0,i.jsx)("span",{className:"digit digit-".concat(Math.floor(n%100/10))}),(0,i.jsx)("span",{className:"digit digit-".concat(n%10)})]})},c=e(4924);function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function m(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function v(t,r){if(t){if("string"==typeof t)return f(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return f(t,r)}}function g(t){return function(t){if(Array.isArray(t))return f(t)}(t)||m(t)||v(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=e(4184),p=e.n(d),h=function(t,r,e,n){var a=t.r,i=t.c,u=t.x,o=t.y,l=g(e),s=function(t,e,a,i){if(0===r[t][e]){l[t][e]=!0;for(var u=[-1,-1,0,1,1,1,0,-1],o=[0,1,1,1,0,-1,-1,-1],c=0;c<9;c++){var f=t+u[c],m=e+o[c];f>=0&&m>=0&&f<a&&m<i&&!l[f][m]&&!n[f][m]&&(l[f][m]=!0,s(f,m,a,i))}}};return s(u,o,a,i),l},y=function(t){for(var r=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)!0===t[e][n]&&(r+=1);return r},b=function(t,r){for(var e=r.r,n=r.c,a=r.x,i=r.y,u=r.value,o=0,l=g(t.open),s=[],c=[-1,-1,0,1,1,1,0,-1],f=[0,1,1,1,0,-1,-1,-1],d=0;d<c.length;d++){var p=a+c[d],y=i+f[d];p>=0&&y>=0&&p<e&&y<n&&(t.flag[p][y]?o+=1:t.open[p][y]||s.push([p,y]))}return o===u&&s.forEach(function(r){var a,i,u=function(t){if(Array.isArray(t))return t}(r)||m(r,2)||v(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=u[0],s=u[1];0===t.game[o][s]?l=h({x:o,y:s,r:e,c:n},t.game,l,t.flag):l[o][s]=!0}),l},x=function(t,r){for(var e=[],n=0;n<r.length;n++)for(var a=0;a<r[n].length;a++)r[n][a]&&"mine"===t[n][a]&&e.push([n,a]);return!!e.length&&e},j=function(t){var r,e=t.game,l=function(t,r){if(!w.length)return!1;for(var e=0;e<w.length;e++)if(w[e][0]===t&&w[e][1]===r)return!0;return!1},s=function(t,r){if(!j.length)return!1;for(var e=0;e<j.length;e++)if(j[e][0]===t&&j[e][1]===r)return!0;return!1},f=(0,u.useContext)(o.Global),m=f.gameState,v=f.setGameState,d=(0,u.useState)([]),j=d[0],S=d[1],N=(0,u.useState)([]),w=N[0],A=N[1],Z=(0,u.useState)(0),O=Z[0],C=Z[1],E=(0,u.useState)(Array(m.r).fill(!1).map(function(){return Array(m.c).fill(!1)})),k=E[0],T=E[1],_=(0,u.useState)(Array(m.r).fill(!1).map(function(){return Array(m.c).fill(!1)})),G=_[0],M=_[1],P=(0,u.useState)(null),F=P[0],I=P[1];(0,u.useEffect)(function(){if(e){var t=Array(m.r).fill(!1).map(function(){return Array(m.c).fill(!1)});T(t);var r=Array(m.r).fill(!1).map(function(){return Array(m.c).fill(!1)});M(r),C(0),A([])}},[e,m.c]),(0,u.useEffect)(function(){m.r*m.c-m.mine===O&&(v(function(t){return a((0,n.Z)({},t),{result:"win",start:!1})}),X())},[O]);var D=function(t){if(e&&"default"===m.result){m.start||v(a((0,n.Z)({},m),{start:!0}));var r=Number(t.currentTarget.attributes[1].value),i=Number(t.currentTarget.attributes[0].value);if(!G[r][i]&&!k[r][i]){var u=g(k);if(0===e[r][i]){var o={x:r,y:i,r:m.r,c:m.c},l=h(o,e,u,G),s=y(l);T(l),C(s)}else"mine"===e[r][i]?(u[r][i]=!0,T(u),v(a((0,n.Z)({},m),{result:"lose",start:!1})),I([r,i]),R(),$()):(u[r][i]=!0,C(function(t){return t+1}),T(u))}}},U=function(t){if(t.preventDefault(),"default"===m.result){m.start||v(a((0,n.Z)({},m),{start:!0}));var r=g(G),e=Number(t.currentTarget.attributes[1].value),i=Number(t.currentTarget.attributes[0].value);!k[e][i]&&(r[e][i]?v(a((0,n.Z)({},m),{flag:m.flag-1})):v(a((0,n.Z)({},m),{flag:m.flag+1})),r[e][i]=!r[e][i],M(r))}},X=function(){for(var t=g(G),r=0;r<m.r;r++)for(var e=0;e<m.c;e++)k[r][e]||(t[r][e]=!0);M(t),v(function(t){return a((0,n.Z)({},t),{flag:t.mine})})},L=function(t){if(S([]),e&&"default"===m.result){var r=Number(t.currentTarget.attributes[1].value),i=Number(t.currentTarget.attributes[0].value);if(k[r][i]){for(var u=t.currentTarget.classList,o=/^value/,l=0,s=0;s<u.length;s++)if(o.test(u[s])){l=Number(u[s].split("-")[1]);break}var c={value:l,r:m.r,c:m.c,x:r,y:i},f=b({game:e,open:k,flag:G},c),g=y(f),d=x(e,k);d&&(I(d[0]),v(a((0,n.Z)({},m),{start:!1,result:"lose"})),R(),$()),T(f),C(g)}}},R=function(){for(var t=g(k),r=0;r<m.r;r++)for(var n=0;n<m.c;n++)e&&"mine"===e[r][n]&&!0==!G[r][n]&&(t[r][n]=!0);T(t)},$=function(){for(var t=g(w),r=0;r<m.r;r++)for(var n=0;n<m.c;n++)e&&G[r][n]&&"mine"!==e[r][n]&&t.push([r,n]);A(t)},q=function(t){if("default"===m.result){var r=g(j),e=Number(t.currentTarget.attributes[1].value),n=Number(t.currentTarget.attributes[0].value);if(k[e][n])for(var a=[-1,-1,0,1,1,1,0,-1],i=[0,1,1,1,0,-1,-1,-1],u=0;u<9;u++){var o=e+a[u],l=n+i[u];o>=0&&l>=0&&o<m.r&&l<m.c&&!k[o][l]&&!G[o][l]&&(r.push([o,l]),S(r))}else r.push([e,n]),S(r)}};return e?(0,i.jsx)("ul",{className:"grid",children:e.map(function(t,r){var n,a;return(0,i.jsx)("li",{children:(0,i.jsx)("ul",{style:{display:"flex"},children:t.map(function(t,n){var a,u=p()("minebox",(a={},(0,c.Z)(a,"open value-".concat(e[r][n]),k[r][n]),(0,c.Z)(a,"close",!k[r][n]),(0,c.Z)(a,"flag",!k[r][n]&&G[r][n]),(0,c.Z)(a,"firework","win"===m.result&&G[r][n]),(0,c.Z)(a,"bomb",F&&F[0]===r&&F[1]===n),(0,c.Z)(a,"wrongFlag",l(r,n)),(0,c.Z)(a,"active",s(r,n)),a));return(0,i.jsx)("li",{"data-y":n,"data-x":r,onClick:D,onContextMenu:U,onMouseUp:L,onMouseDown:q,className:u},"row".concat(n))})})},r)})}):(0,i.jsx)(i.Fragment,{})},S=function(t){return Math.floor(Math.random()*t)},N=function(t,r,e){for(var n=[];n.length<e;){var a=S(t),i=S(r),u=[a,i];if(n.length){var o=!1,l=!0,s=!1,c=void 0;try{for(var f,m=n[Symbol.iterator]();!(l=(f=m.next()).done);l=!0){var v=f.value;if(v[0]===a&&v[1]===i){o=!0;break}}}catch(g){s=!0,c=g}finally{try{l||null==m.return||m.return()}finally{if(s)throw c}}o||n.push(u)}else n.push(u)}return n},w=function(t,r,e,n,a){for(var i=0,u=[-1,-1,0,1,1,1,0,-1],o=[0,1,1,1,0,-1,-1,-1],l=0;l<8;l++){var s=t+u[l],c=r+o[l];s>=0&&c>=0&&s<e&&c<n&&"mine"===a[s][c]&&(i+=1)}return i},A=function(t,r,e){var n=Array(t).fill(0).map(function(){return Array(r).fill(0)}),a=N(t,r,e),i=!0,u=!1,o=void 0;try{for(var l,s=a[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;n[c[0]][c[1]]="mine"}}catch(f){u=!0,o=f}finally{try{i||null==s.return||s.return()}finally{if(u)throw o}}for(var m=0;m<t;m++)for(var v=0;v<r;v++)"mine"!==n[m][v]&&(n[m][v]=w(m,v,t,r,n));return n},Z=function(){var t=(0,u.useContext)(o.Global),r=t.gameState,e=t.setGameState,l=(0,u.useState)(1),s=l[0],c=l[1],f=function(t){return function(){c(t)}};return(0,u.useEffect)(function(){if(1===s){var t=a((0,n.Z)({},r),{start:!1,r:9,c:9,mine:10,flag:0,time:0,result:"default"});e(t)}else if(2===s){var i=a((0,n.Z)({},r),{start:!1,r:16,c:16,mine:40,flag:0,time:0,result:"default"});e(i)}else if(3===s){var u=a((0,n.Z)({},r),{start:!1,r:16,c:30,mine:99,flag:0,time:0,result:"default"});e(u)}},[s]),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("ul",{children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("input",{type:"radio",name:"level",id:"1",checked:1===s,onChange:f(1)}),(0,i.jsx)("label",{htmlFor:"1",children:"초급"})]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("input",{type:"radio",name:"level",id:"2",checked:2===s,onChange:f(2)}),(0,i.jsx)("label",{htmlFor:"2",children:"중급"})]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("input",{type:"radio",name:"level",id:"3",checked:3===s,onChange:f(3)}),(0,i.jsx)("label",{htmlFor:"3",children:"상급"})]})]})})},O=function(){var t=(0,u.useContext)(o.Global),r=t.gameState,e=t.setGameState,c=(0,u.useState)(),f=c[0],m=c[1];(0,u.useEffect)(function(){m(A(r.r,r.c,r.mine))},[r.c]);var v=function(){r&&e&&(e(a((0,n.Z)({},r),{start:!1,result:"default",time:0,flag:0})),m(A(r.r,r.c,r.mine)))},g=p()("control",{lose:"lose"===r.result,win:"win"===r.result});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z,{}),(0,i.jsxs)("div",{className:"container",style:{"--mine-columns":r.c},children:[(0,i.jsxs)("div",{className:"top",children:[(0,i.jsx)(s,{}),(0,i.jsx)("button",{className:g,onClick:v}),(0,i.jsx)(l,{})]}),(0,i.jsx)(j,{game:f})]})]})}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);