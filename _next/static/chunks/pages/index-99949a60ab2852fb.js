(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4184:function(t,r){var e; /*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/ !function(){"use strict";var n={}.hasOwnProperty;function a(){for(var t=[],r=0;r<arguments.length;r++){var e=arguments[r];if(e){var i=typeof e;if("string"===i||"number"===i)t.push(e);else if(Array.isArray(e)){if(e.length){var o=a.apply(null,e);o&&t.push(o)}}else if("object"===i){if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]")){t.push(e.toString());continue}for(var u in e)n.call(e,u)&&e[u]&&t.push(u)}}}return t.join(" ")}t.exports?(a.default=a,t.exports=a):void 0!==(e=(function(){return a}).apply(r,[]))&&(t.exports=e)}()},8312:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(6411)}])},6411:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return O}});var n=e(6042);function a(t,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e.push.apply(e,n)}return e})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t}var i=e(5893),o=e(7294),u=e(5656),l=function(){var t=(0,o.useContext)(u.Global),r=t.gameState,e=t.setGameState,l=(0,o.useRef)(null);return(0,o.useEffect)(function(){r.start?(e(a((0,n.Z)({},r),{time:0})),l.current=setInterval(function(){e(function(t){return a((0,n.Z)({},t),{time:t.time+1})})},1e3)):clearInterval(l.current)},[r.start]),(0,i.jsxs)("div",{className:"timer",children:[(0,i.jsx)("span",{className:"digit digit-".concat(r.time>999?9:Math.floor(r.time/100))}),(0,i.jsx)("span",{className:"digit digit-".concat(r.time>999?9:Math.floor(r.time%100/10))}),(0,i.jsx)("span",{className:"digit digit-".concat(r.time>999?9:r.time%10)})]})},c=function(){var t=(0,o.useContext)(u.Global),r=t.gameState;t.setGameState;var e=(0,o.useState)(r.mine-r.flag),n=e[0],a=e[1];return(0,o.useEffect)(function(){a(r.mine-r.flag)},[r.flag]),(0,i.jsxs)("div",{className:"flagCount",children:[(0,i.jsx)("span",{className:"digit digit-".concat(Math.floor(n/100))}),(0,i.jsx)("span",{className:"digit digit-".concat(Math.floor(n%100/10))}),(0,i.jsx)("span",{className:"digit digit-".concat(n%10)})]})},f=e(4924);function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=Array(r);e<r;e++)n[e]=t[e];return n}function m(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function v(t,r){if(t){if("string"==typeof t)return s(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if("Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,r)}}function g(t){return function(t){if(Array.isArray(t))return s(t)}(t)||m(t)||v(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=e(4184),y=e.n(p),d=function(t,r,e,n){var a=t.r,i=t.c,o=t.x,u=t.y,l=g(e),c=function(t,e,a,i){if(0===r[t][e]){l[t][e]=!0;for(var o=[-1,-1,0,1,1,1,0,-1],u=[0,1,1,1,0,-1,-1,-1],f=0;f<9;f++){var s=t+o[f],m=e+u[f];s>=0&&m>=0&&s<a&&m<i&&!l[s][m]&&!n[s][m]&&(l[s][m]=!0,c(s,m,a,i))}}};return c(o,u,a,i),l},b=function(t){for(var r=0,e=0;e<t.length;e++)for(var n=0;n<t[e].length;n++)!0===t[e][n]&&(r+=1);return r},h=function(t,r){for(var e=r.r,n=r.c,a=r.x,i=r.y,o=r.value,u=0,l=g(t.open),c=[],f=[-1,-1,0,1,1,1,0,-1],s=[0,1,1,1,0,-1,-1,-1],p=0;p<f.length;p++){var y=a+f[p],b=i+s[p];y>=0&&b>=0&&y<e&&b<n&&(t.flag[y][b]?u+=1:t.open[y][b]||c.push([y,b]))}return u===o&&c.forEach(function(r){var a,i,o=function(t){if(Array.isArray(t))return t}(r)||m(r,2)||v(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=o[0],c=o[1];0===t.game[u][c]?l=d({x:u,y:c,r:e,c:n},t.game,l,t.flag):l[u][c]=!0}),l},x=function(t,r){for(var e=0;e<r.length;e++)for(var n=0;n<r[e].length;n++)if(r[e][n]&&"mine"===t[e][n])return!0;return!1},j=function(t){var r,e=t.game,l=(0,o.useContext)(u.Global),c=l.gameState,s=l.setGameState,m=(0,o.useState)(0),v=m[0],p=m[1],j=(0,o.useState)(Array(c.r).fill(!1).map(function(){return Array(c.c).fill(!1)})),S=j[0],N=j[1],w=(0,o.useState)(Array(c.r).fill(!1).map(function(){return Array(c.c).fill(!1)})),A=w[0],O=w[1],Z=(0,o.useState)(null),E=Z[0],_=Z[1];(0,o.useEffect)(function(){if(e){var t=Array(c.r).fill(!1).map(function(){return Array(c.c).fill(!1)});N(t);var r=Array(c.r).fill(!1).map(function(){return Array(c.c).fill(!1)});O(r),p(0)}},[e]),(0,o.useEffect)(function(){c.r*c.c-c.mine===v&&(s(function(t){return a((0,n.Z)({},t),{result:"win",start:!1})}),k())},[v]);var C=function(t){if(e&&"default"===c.result){c.start||s(a((0,n.Z)({},c),{start:!0}));var r=Number(t.currentTarget.attributes[1].value),i=Number(t.currentTarget.attributes[0].value);if(!A[r][i]&&!S[r][i]){var o=g(S);if(0===e[r][i]){var u={x:r,y:i,r:c.r,c:c.c},l=d(u,e,o,A),f=b(l);N(l),p(f)}else"mine"===e[r][i]?(o[r][i]=!0,N(o),s(a((0,n.Z)({},c),{result:"lose",start:!1})),_([r,i]),M()):(o[r][i]=!0,p(function(t){return t+1}),N(o))}}},T=function(t){if(t.preventDefault(),"default"===c.result){c.start||s(a((0,n.Z)({},c),{start:!0}));var r=g(A),e=Number(t.currentTarget.attributes[1].value),i=Number(t.currentTarget.attributes[0].value);!S[e][i]&&(r[e][i]?s(a((0,n.Z)({},c),{flag:c.flag-1})):s(a((0,n.Z)({},c),{flag:c.flag+1})),r[e][i]=!r[e][i],O(r))}},k=function(){for(var t=g(A),r=0;r<c.r;r++)for(var e=0;e<c.c;e++)S[r][e]||(t[r][e]=!0);O(t),s(function(t){return a((0,n.Z)({},t),{flag:t.mine})})},P=function(t){if(e&&"default"===c.result){var r=Number(t.currentTarget.attributes[1].value),i=Number(t.currentTarget.attributes[0].value);if(S[r][i]){for(var o=t.currentTarget.classList,u=/^value/,l=0,f=0;f<o.length;f++)if(u.test(o[f])){l=Number(o[f].split("-")[1]);break}var m={value:l,r:c.r,c:c.c,x:r,y:i},v=h({game:e,open:S,flag:A},m),g=b(v);x(e,S)&&s(a((0,n.Z)({},c),{start:!1,result:"lose"})),N(v),p(g)}}},M=function(){for(var t=g(S),r=0;r<c.r;r++)for(var n=0;n<c.c;n++)e&&"mine"===e[r][n]&&(t[r][n]=!0);N(t)};return e?(0,i.jsx)("ul",{className:"grid",children:e.map(function(t,r){var n,a;return(0,i.jsx)("li",{children:(0,i.jsx)("ul",{children:t.map(function(t,n){var a,o=y()("minebox",(a={},(0,f.Z)(a,"open value-".concat(e[n][r]),S[n][r]),(0,f.Z)(a,"close",!S[n][r]),(0,f.Z)(a,"flag",!S[n][r]&&A[n][r]),(0,f.Z)(a,"firework","win"===c.result&&A[n][r]),(0,f.Z)(a,"bomb",E&&E[0]===n&&E[1]===r),a));return(0,i.jsx)("li",{"data-y":r,"data-x":n,onClick:C,onContextMenu:T,onMouseUp:P,className:o},"row".concat(n))})})},r)})}):(0,i.jsx)(i.Fragment,{})},S=function(t){return Math.floor(Math.random()*t)},N=function(t,r,e){for(var n=[];n.length<e;){var a=S(t),i=S(r),o=[a,i];if(n.length){var u=!1,l=!0,c=!1,f=void 0;try{for(var s,m=n[Symbol.iterator]();!(l=(s=m.next()).done);l=!0){var v=s.value;if(v[0]===a&&v[1]===i){u=!0;break}}}catch(g){c=!0,f=g}finally{try{l||null==m.return||m.return()}finally{if(c)throw f}}u||n.push(o)}else n.push(o)}return n},w=function(t,r,e,n,a){for(var i=0,o=[-1,-1,0,1,1,1,0,-1],u=[0,1,1,1,0,-1,-1,-1],l=0;l<8;l++){var c=t+o[l],f=r+u[l];c>=0&&f>=0&&c<e&&f<n&&"mine"===a[c][f]&&(i+=1)}return i},A=function(t,r,e){var n=Array(t).fill(0).map(function(){return Array(r).fill(0)}),a=N(t,r,e),i=!0,o=!1,u=void 0;try{for(var l,c=a[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value;n[f[0]][f[1]]="mine"}}catch(s){o=!0,u=s}finally{try{i||null==c.return||c.return()}finally{if(o)throw u}}for(var m=0;m<t;m++)for(var v=0;v<r;v++)"mine"!==n[m][v]&&(n[m][v]=w(m,v,t,r,n));return n},O=function(){var t=(0,o.useContext)(u.Global),r=t.gameState,e=t.setGameState,f=(0,o.useState)(),s=f[0],m=f[1];(0,o.useEffect)(function(){m(A(r.r,r.c,r.mine))},[]);var v=function(){r&&e&&(e(a((0,n.Z)({},r),{start:!1,result:"default",time:0,flag:0})),m(A(r.r,r.c,r.mine)))},g=y()("control",{lose:"lose"===r.result,win:"win"===r.result});return(0,i.jsxs)("div",{className:"container",style:{"--mine-columns":r.c},children:[(0,i.jsxs)("div",{className:"top",children:[(0,i.jsx)(c,{}),(0,i.jsx)("button",{className:g,onClick:v}),(0,i.jsx)(l,{})]}),(0,i.jsx)(j,{game:s})]})}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);