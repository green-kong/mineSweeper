(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4184:function(e,t){var r; /*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/ !function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var l=a.apply(null,r);l&&e.push(l)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var u in r)n.call(r,u)&&r[u]&&e.push(u)}}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0!==(r=(function(){return a}).apply(t,[]))&&(e.exports=r)}()},8312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(400)}])},400:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return O}});var n=r(6042);function a(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var i=r(5893),l=r(7294),u=r(5656),o=function(){var e=(0,l.useContext)(u.Global),t=e.gameState,r=e.setGameState,o=(0,l.useRef)(null);return(0,l.useEffect)(function(){t.start?(r(a((0,n.Z)({},t),{time:0})),o.current=setInterval(function(){r(function(e){return a((0,n.Z)({},e),{time:e.time+1})})},1e3)):clearInterval(o.current)},[t.start]),(0,i.jsxs)("div",{className:"timer",children:[(0,i.jsx)("span",{className:"digit digit-".concat(t.time>999?9:Math.floor(t.time/100))}),(0,i.jsx)("span",{className:"digit digit-".concat(t.time>999?9:Math.floor(t.time%100/10))}),(0,i.jsx)("span",{className:"digit digit-".concat(t.time>999?9:t.time%10)})]})},s=function(){var e=(0,l.useContext)(u.Global),t=e.gameState;e.setGameState;var r=(0,l.useState)(t.mine-t.flag),n=r[0],a=r[1];return(0,l.useEffect)(function(){a(t.mine-t.flag)},[t.flag,t.mine]),(0,i.jsxs)("div",{className:"flagCount",children:[(0,i.jsx)("span",{className:"digit digit-".concat(Math.floor(n/100))}),(0,i.jsx)("span",{className:"digit digit-".concat(Math.floor(n%100/10))}),(0,i.jsx)("span",{className:"digit digit-".concat(n%10)})]})},c=r(4924);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function m(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}}function g(e){return function(e){if(Array.isArray(e))return f(e)}(e)||v(e)||m(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var d=r(4184),p=r.n(d),h=function(e,t,r,n){var a=e.r,i=e.c,l=e.x,u=e.y,o=g(r),s=function(e,r,a,i){if(0===t[e][r]){o[e][r]=!0;for(var l=[-1,-1,0,1,1,1,0,-1],u=[0,1,1,1,0,-1,-1,-1],c=0;c<9;c++){var f=e+l[c],v=r+u[c];f>=0&&v>=0&&f<a&&v<i&&!o[f][v]&&!n[f][v]&&(o[f][v]=!0,s(f,v,a,i))}}};return s(l,u,a,i),o},y=function(e){for(var t=0,r=0;r<e.length;r++)for(var n=0;n<e[r].length;n++)!0===e[r][n]&&(t+=1);return t},b=function(e,t){for(var r=t.r,n=t.c,a=t.x,i=t.y,l=t.value,u=0,o=g(e.open),s=[],c=[-1,-1,0,1,1,1,0,-1],f=[0,1,1,1,0,-1,-1,-1],d=0;d<c.length;d++){var p=a+c[d],y=i+f[d];p>=0&&y>=0&&p<r&&y<n&&(e.flag[p][y]?u+=1:e.open[p][y]||s.push([p,y]))}return u===l&&s.forEach(function(t){var a,i,l=function(e){if(Array.isArray(e))return e}(t)||v(t,2)||m(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=l[0],s=l[1];0===e.game[u][s]?o=h({x:u,y:s,r:r,c:n},e.game,o,e.flag):o[u][s]=!0}),o},x=function(e,t){for(var r=[],n=0;n<t.length;n++)for(var a=0;a<t[n].length;a++)t[n][a]&&"mine"===e[n][a]&&r.push([n,a]);return!!r.length&&r},j=function(e){var t,r=e.game,o=function(e,t){if(!w.length)return!1;for(var r=0;r<w.length;r++)if(w[r][0]===e&&w[r][1]===t)return!0;return!1},s=function(e,t){if(!j.length)return!1;for(var r=0;r<j.length;r++)if(j[r][0]===e&&j[r][1]===t)return!0;return!1},f=(0,l.useContext)(u.Global),v=f.gameState,m=f.setGameState,d=(0,l.useState)([]),j=d[0],S=d[1],N=(0,l.useState)([]),w=N[0],A=N[1],Z=(0,l.useState)(0),O=Z[0],E=Z[1],k=(0,l.useState)(Array(v.r).fill(!1).map(function(){return Array(v.c).fill(!1)})),C=k[0],T=k[1],_=(0,l.useState)(Array(v.r).fill(!1).map(function(){return Array(v.c).fill(!1)})),I=_[0],G=_[1],M=(0,l.useState)(null),P=M[0],D=M[1];(0,l.useEffect)(function(){if(r){var e=Array(v.r).fill(!1).map(function(){return Array(v.c).fill(!1)});T(e);var t=Array(v.r).fill(!1).map(function(){return Array(v.c).fill(!1)});G(t),E(0),A([])}},[r,v.c]),(0,l.useEffect)(function(){v.r*v.c-v.mine===O&&(m(function(e){return a((0,n.Z)({},e),{result:"win",start:!1})}),U())},[O]);var F=function(e){if(r&&"default"===v.result){v.start||m(a((0,n.Z)({},v),{start:!0}));var t=Number(e.currentTarget.attributes[1].value),i=Number(e.currentTarget.attributes[0].value);if(!I[t][i]&&!C[t][i]){var l=g(C);if(0===r[t][i]){var u={x:t,y:i,r:v.r,c:v.c},o=h(u,r,l,I),s=y(o);T(o),E(s)}else"mine"===r[t][i]?(l[t][i]=!0,T(l),m(a((0,n.Z)({},v),{result:"lose",start:!1})),D([t,i]),B(),L()):(l[t][i]=!0,E(function(e){return e+1}),T(l))}}},K=function(e){if(e.preventDefault(),"default"===v.result){v.start||m(a((0,n.Z)({},v),{start:!0}));var t=g(I),r=Number(e.currentTarget.attributes[1].value),i=Number(e.currentTarget.attributes[0].value);!C[r][i]&&(t[r][i]?m(a((0,n.Z)({},v),{flag:v.flag-1})):m(a((0,n.Z)({},v),{flag:v.flag+1})),t[r][i]=!t[r][i],G(t))}},U=function(){for(var e=g(I),t=0;t<v.r;t++)for(var r=0;r<v.c;r++)C[t][r]||(e[t][r]=!0);G(e),m(function(e){return a((0,n.Z)({},e),{flag:e.mine})})},X=function(e){if(S([]),r&&"default"===v.result){var t=Number(e.currentTarget.attributes[1].value),i=Number(e.currentTarget.attributes[0].value);if(C[t][i]){for(var l=e.currentTarget.classList,u=/^value/,o=0,s=0;s<l.length;s++)if(u.test(l[s])){o=Number(l[s].split("-")[1]);break}var c={value:o,r:v.r,c:v.c,x:t,y:i},f=b({game:r,open:C,flag:I},c),g=y(f),d=x(r,C);d&&(D(d[0]),m(a((0,n.Z)({},v),{start:!1,result:"lose"})),B(),L()),T(f),E(g)}}},B=function(){for(var e=g(C),t=0;t<v.r;t++)for(var n=0;n<v.c;n++)r&&"mine"===r[t][n]&&!0==!I[t][n]&&(e[t][n]=!0);T(e)},L=function(){for(var e=g(w),t=0;t<v.r;t++)for(var n=0;n<v.c;n++)r&&I[t][n]&&"mine"!==r[t][n]&&e.push([t,n]);A(e)},R=function(e){if("default"===v.result){var t=g(j),r=Number(e.currentTarget.attributes[1].value),n=Number(e.currentTarget.attributes[0].value);if(C[r][n])for(var a=[-1,-1,0,1,1,1,0,-1],i=[0,1,1,1,0,-1,-1,-1],l=0;l<9;l++){var u=r+a[l],o=n+i[l];u>=0&&o>=0&&u<v.r&&o<v.c&&!C[u][o]&&!I[u][o]&&(t.push([u,o]),S(t))}else t.push([r,n]),S(t)}};return r?(0,i.jsx)("ul",{className:"grid",children:r.map(function(e,t){var n,a;return(0,i.jsx)("li",{children:(0,i.jsx)("ul",{style:{display:"flex"},children:e.map(function(e,n){var a,l=p()("minebox",(a={},(0,c.Z)(a,"open value-".concat(r[t][n]),C[t][n]),(0,c.Z)(a,"close",!C[t][n]),(0,c.Z)(a,"flag",!C[t][n]&&I[t][n]),(0,c.Z)(a,"firework","win"===v.result&&I[t][n]),(0,c.Z)(a,"bomb",P&&P[0]===t&&P[1]===n),(0,c.Z)(a,"wrongFlag",o(t,n)),(0,c.Z)(a,"active",s(t,n)),a));return(0,i.jsx)("li",{"data-y":n,"data-x":t,onClick:F,onContextMenu:K,onMouseUp:X,onMouseDown:R,className:l},"row".concat(n))})})},t)})}):(0,i.jsx)(i.Fragment,{})},S=function(e){return Math.floor(Math.random()*e)},N=function(e,t,r){for(var n=[];n.length<r;){var a=S(e),i=S(t),l=[a,i];if(n.length){var u=!1,o=!0,s=!1,c=void 0;try{for(var f,v=n[Symbol.iterator]();!(o=(f=v.next()).done);o=!0){var m=f.value;if(m[0]===a&&m[1]===i){u=!0;break}}}catch(g){s=!0,c=g}finally{try{o||null==v.return||v.return()}finally{if(s)throw c}}u||n.push(l)}else n.push(l)}return n},w=function(e,t,r,n,a){for(var i=0,l=[-1,-1,0,1,1,1,0,-1],u=[0,1,1,1,0,-1,-1,-1],o=0;o<8;o++){var s=e+l[o],c=t+u[o];s>=0&&c>=0&&s<r&&c<n&&"mine"===a[s][c]&&(i+=1)}return i},A=function(e,t,r){var n=Array(e).fill(0).map(function(){return Array(t).fill(0)}),a=N(e,t,r),i=!0,l=!1,u=void 0;try{for(var o,s=a[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;n[c[0]][c[1]]="mine"}}catch(f){l=!0,u=f}finally{try{i||null==s.return||s.return()}finally{if(l)throw u}}for(var v=0;v<e;v++)for(var m=0;m<t;m++)"mine"!==n[v][m]&&(n[v][m]=w(v,m,e,t,n));return n},Z=function(){var e=(0,l.useContext)(u.Global),t=e.gameState,r=e.setGameState,o=(0,l.useState)(1),s=o[0],c=o[1],f=function(e){return function(){c(e)}};(0,l.useEffect)(function(){if(1===s){var e=a((0,n.Z)({},t),{start:!1,r:9,c:9,mine:10,flag:0,time:0,result:"default"});r(e)}else if(2===s){var i=a((0,n.Z)({},t),{start:!1,r:16,c:16,mine:40,flag:0,time:0,result:"default"});r(i)}else if(3===s){var l=a((0,n.Z)({},t),{start:!1,r:16,c:30,mine:99,flag:0,time:0,result:"default"});r(l)}},[s]);var v=function(e){("Enter"===e.key||" "===e.key)&&e.currentTarget.click()};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"level_box",children:[(0,i.jsxs)("span",{className:p()("level",{active:1===s}),children:[(0,i.jsx)("input",{type:"radio",name:"level",id:"level1",checked:1===s,onChange:f(1)}),(0,i.jsx)("label",{htmlFor:"level1",tabIndex:0,onKeyDown:v,children:"Beginner"})]}),(0,i.jsxs)("span",{className:p()("level",{active:2===s}),children:[(0,i.jsx)("input",{type:"radio",name:"level",id:"level2",checked:2===s,onChange:f(2)}),(0,i.jsx)("label",{htmlFor:"level2",tabIndex:0,onKeyDown:v,children:"Intermediate"})]}),(0,i.jsxs)("span",{className:p()("level",{active:3===s}),children:[(0,i.jsx)("input",{type:"radio",name:"level",id:"level3",checked:3===s,onChange:f(3)}),(0,i.jsx)("label",{htmlFor:"level3",tabIndex:0,onKeyDown:v,children:"Expert"})]})]})})},O=function(){var e=(0,l.useContext)(u.Global),t=e.gameState,r=e.setGameState,c=(0,l.useState)(),f=c[0],v=c[1];(0,l.useEffect)(function(){v(A(t.r,t.c,t.mine))},[t.c]);var m=function(){t&&r&&(r(a((0,n.Z)({},t),{start:!1,result:"default",time:0,flag:0})),v(A(t.r,t.c,t.mine)))},g=p()("control",{lose:"lose"===t.result,win:"win"===t.result});return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"game_container",style:{"--mine-columns":t.c},children:[(0,i.jsx)(Z,{}),(0,i.jsxs)("div",{className:"top",children:[(0,i.jsx)(s,{}),(0,i.jsx)("button",{className:g,onClick:m}),(0,i.jsx)(o,{})]}),(0,i.jsx)(j,{game:f})]})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);